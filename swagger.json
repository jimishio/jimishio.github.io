{"swagger":"2.0","info":{"title":"Oizom API","version":"0.1.0"},"basePath":"/","paths":{"/{userId}/devices":{"get":{"summary":"Get all devices","description":"Get all devices of user","tags":["Devices API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}},"post":{"summary":"Register device","description":"User registers a new device ","tags":["Devices API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"serial","in":"formData","description":"Serial Number of device","required":true,"type":"string"},{"name":"label","in":"formData","description":"Pseudo name","required":true,"type":"string"},{"name":"loc","in":"formData","description":"Location","required":true,"type":"string"},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"latitude","in":"formData","description":"Latitude","required":false,"type":"number"},{"name":"longitude","in":"formData","description":"Longitude","required":false,"type":"number"}],"responses":{"default":{"description":""}}}},"/{userId}/devices/{deviceId}":{"get":{"summary":"Fetch device info","description":"Fetch a specific device info","tags":["Devices API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}},"put":{"summary":"Update device","description":"Update device label or location","tags":["Devices API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"label","in":"formData","description":"Pseudo Name","required":false,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/signup":{"post":{"summary":"Add user data","description":"Register a new user and create its entry","tags":["Auth API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"username","in":"formData","description":"Username","required":true,"type":"string"},{"name":"password","in":"formData","description":"Password","required":true,"type":"string"},{"name":"email","in":"formData","description":"Email of User","required":true,"type":"string"},{"name":"firstname","in":"formData","description":"First name of User","required":false,"type":"string"},{"name":"lastname","in":"formData","description":"Last Name of User","required":false,"type":"string"},{"name":"contact","in":"formData","description":"Contact of User","required":false,"type":"string"}],"responses":{"201":{"description":"created","code":"201"},"default":{"description":"default","code":"default"}}}},"/login":{"post":{"summary":"Login","description":"Logging In using credentials","tags":["Auth API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"username","in":"formData","description":"Username","required":true,"type":"string"},{"name":"password","in":"formData","description":"Password","required":true,"type":"string"}],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/users/{userId}/chpass":{"put":{"summary":"Change Password","description":"Change password of registered user","tags":["User API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"password","in":"formData","description":"New password","required":true,"type":"string"},{"name":"old","in":"formData","description":"Old Password","required":true,"type":"string"},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"changed","code":"200"},"default":{"description":"default","code":"default"}}}},"/users/{userId}":{"get":{"summary":"User info","description":"Get user info","tags":["User API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}},"put":{"summary":"Update User","description":"Update  user info","tags":["User API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string"},{"name":"firstname","in":"formData","description":"First Name","required":false,"type":"string"},{"name":"lastname","in":"formData","description":"Last Name","required":false,"type":"string"},{"name":"contact","in":"formData","description":"Contact","required":false,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/fields":{"post":{"summary":"Insert new field","description":"Insert new field into fields table to display data","tags":["Fields API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"fkey","in":"formData","description":"field key","required":true,"type":"string"},{"name":"type","in":"formData","description":"Device Type","required":true,"type":"string"},{"name":"label","in":"formData","description":"Display Name","required":true,"type":"string"},{"name":"cat","in":"formData","description":"category","required":true,"type":"string"}],"responses":{"201":{"description":"Created","code":"201"},"default":{"description":"default code","code":"default"}}},"get":{"summary":"Get fields","description":"Get all fields or type specific field","tags":["Fields API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"type","in":"query","description":"Device Type","required":false,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default response"}}}},"/{userId}/data/cur/{deviceId}":{"get":{"summary":"Get current data","description":"Get current data of a specific device","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"Device ID","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/cur":{"post":{"summary":"Average of devices","description":"Get average vaules from device Id","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"devices","in":"body","description":"Devices Array","required":true,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":"","propertyRow":true},"name":"devices","propertyRow":true}}}},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/{userId}/data/range/hours/{deviceId}":{"get":{"summary":"Get data in range","description":"Get last day data or data in range from hours collection","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"lte","in":"formData","description":"Less than time","required":false,"type":"string"},{"name":"gte","in":"formData","description":"Greater than time","required":false,"type":"string"},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/range/hours":{"post":{"summary":"Ranged data","description":"All data of all devices for last day or time range from hours collection","tags":["Data API"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"devices and time","in":"body","description":"Devices List and time","required":true,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":""}},"lte":{"type":"string","format":"Less than time"},"gte":{"type":"string","format":"Greater than time"}}}},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/range/days/{deviceId}":{"get":{"summary":"Get data in range","description":"Get last week data or data in range from daily collection","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"lte","in":"formData","description":"Less than time","required":false,"type":"string"},{"name":"gte","in":"formData","description":"Greater than time","required":false,"type":"string"}],"responses":{"default":{"description":""}}}},"/{userId}/data/range/days":{"post":{"summary":"Ranged Data","description":"All data of all devices for last week or time range from daily collection","tags":["Data API"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"devices and time","in":"body","description":"Devices Array and time","required":true,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":""}},"lte":{"type":"string","format":"Less than time"},"gte":{"type":"string","format":"Greater than time"}}}}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/range/week/{deviceId}":{"get":{"summary":"Get data in range","description":"Get last month data or data in range from weekly collection","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"lte","in":"formData","description":"Less than time","required":false,"type":"string"},{"name":"gte","in":"formData","description":"Greater than time","required":false,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/range/week":{"post":{"summary":"Ranged data","description":"All data of all devices for last month or time range from weekly collection","tags":["Data API"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"devices and time","in":"body","description":"Devices Array and time","required":true,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":""}},"lte":{"type":"string","format":"Less than time"},"gte":{"type":"string","format":"Greater than time"}}}}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/range/{deviceId}":{"get":{"summary":"Get data in range","description":"Get last 24 hours data or data in range from private collection","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"lte","in":"formData","description":"Less than time","required":false,"type":"string"},{"name":"gte","in":"formData","description":"Greater than time","required":false,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/range":{"post":{"summary":"Ranged Data","description":"All data of all devices for last 24 hours or time range from private collection","tags":["Data API"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"devices and time","in":"body","description":"Devices Array and optional time","required":true,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":"","propertyRow":true},"name":"devices","propertyRow":true},"lte":{"type":"string","format":"Less than time","name":"lte","propertyRow":true},"gte":{"type":"string","format":"Greater than time","name":"gte","propertyRow":true}}}}],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/{userId}/data/avg/{deviceId}":{"get":{"summary":"Get hourly avg","description":"Get last average vaule or at timestamp between an hour","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"t","in":"formData","description":"Timestamp","required":false,"type":"string"},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/data/avg":{"post":{"summary":"Average of devices","description":"Current average of devices or at timestamp","tags":["Data API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"devices and t","in":"body","description":"Device Id List and optional timestamp","required":true,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":"csv"}},"t":{"type":"string","format":"Timestamp"}}}},{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/all/public/devices":{"get":{"summary":"Device and Data","description":"All public devices and their current data","tags":["Public API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}},"post":{"summary":"Current data of devices","description":"Get current data of all devices","tags":["Public API"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"devices list","in":"body","description":"Devices List","required":true,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":"\"Device_ID\"","propertyRow":true},"name":"devices","propertyRow":true}}}}],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/*/wdevice":{"post":{"summary":"[post] <DEVICE TYPE>/device","responses":{"default":{"description":""}}}},"/{userId}/reports/add/{deviceId}":{"post":{"summary":"Add Report","description":"Add report to be presented at next schedule","tags":["Reports API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"field","in":"formData","description":"Which field to be reported","required":true,"type":"string","format":"\"all\", \"g1\", \"p1\""},{"name":"type","in":"formData","description":"type of report","required":true,"type":"string","format":"\"d\",\"w\",\"m\""},{"name":"label","in":"formData","description":"Name of report","required":true,"type":"string","format":"\"Name\""},{"name":"email","in":"formData","description":"Email to send report","required":true,"type":"string","format":"\"a@b.com\""}],"responses":{"201":{"description":"added","code":"201"},"default":{"description":"default","code":"default"}}}},"/{userId}/reports/all":{"get":{"summary":"User reports","description":"Get all user reports","tags":["Reports API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/{userId}/reports/del/{reportId}":{"delete":{"summary":"Delete reporting","description":"Delete reporting of a specific report","tags":["Reports API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","description":"userId","required":true,"type":"string"},{"name":"reportId","in":"path","description":"reportId","required":true,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/all/public/data/{deviceId}":{"get":{"summary":"Get device data","description":"Get device hourly data for 24 hours or in time range","tags":["Public API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"lte","in":"formData","description":"Less than time","required":false,"type":"string"},{"name":"gte","in":"formData","description":"Greater than time","required":false,"type":"string"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/all/public/full/{deviceId}":{"get":{"summary":"Get full data","description":"Get all data for time range or last 24 hours","tags":["Public API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"lte","in":"formData","description":"Less than time","required":false,"type":"string"},{"name":"gte","in":"formData","description":"Greater than time","required":false,"type":"string"}],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/all/public/aqi/{deviceId}":{"get":{"summary":"aqi by device name","description":"Get AQI by device ID","tags":["Public API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application json"],"parameters":[{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"}],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/all/public/aqi":{"post":{"summary":"AQI of all devices","description":"Get AQI of all devices","tags":["Public API"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"devices list","in":"body","description":"Devices array","required":false,"schema":{"type":"object","properties":{"devices":{"type":"array","items":{"type":"string","format":"\"Device_ID\""}}}}}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}},"/all/public/aqi/all/aqi":{"get":{"summary":"Aqi of all devices","description":"Current AQI of all devices","tags":["Public API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/all/public/{deviceId}":{"get":{"summary":"Device current data","description":"Device current data","tags":["Public API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"}],"responses":{"200":{"description":"ok","code":"200"},"default":{"description":"default","code":"default"}}}},"/all/trips/{deviceId}/{limit}":{"get":{"summary":"trips list from limit","description":"Get trips list from the limit","tags":["Public API"],"consumes":["application/json","application/x-form-www-urlencoded"],"produces":["application/json"],"parameters":[{"name":"deviceId","in":"path","description":"deviceId","required":true,"type":"string"},{"name":"limit","in":"path","description":"limit of trips","required":true,"type":"number"}],"responses":{"200":{"description":"ok"},"default":{"description":"default"}}}}}}